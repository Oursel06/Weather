package com.weather.city

import android.annotation.SuppressLint
import android.os.Bundle
import android.util.Log
import android.view.*
import android.widget.Toast
import androidx.fragment.app.Fragment
import androidx.recyclerview.widget.LinearLayoutManager
import androidx.recyclerview.widget.RecyclerView
import com.weather.App
import com.weather.Database
import com.weather.R
import com.weather.utils.toast

class CityFragment : Fragment(), CityAdapter.CityItemlistener {
    interface CityFragmentListener{
        fun onCitySelected(city: City)
    }
    private val allcity: Array<String> = arrayOf("abbeville" ,"abymes" ,"acheres" ,"agde" ,"agen" ,"aix-en-provence" ,"aix-les-bains" ,"ajaccio" ,"albertville" ,"albi" ,"alencon" ,"ales" ,"alfortville" ,"allauch" ,"allonnes" ,"ambares-et-lagrave" ,"amberieu-en-bugey" ,"amboise" ,"amiens" ,"amilly" ,"amneville" ,"andernos-les-bains" ,"andresy" ,"angers" ,"anglet" ,"angouleme" ,"aniche" ,"annecy" ,"annecy-le-vieux" ,"annemasse" ,"annonay" ,"antibes" ,"antony" ,"anzin" ,"apt" ,"arcachon" ,"arcueil" ,"argentan" ,"argenteuil" ,"arles" ,"armentieres" ,"arnouville" ,"arpajon" ,"arras" ,"asnieres-sur-seine" ,"athis-mons" ,"aubagne" ,"aubenas" ,"aubergenville" ,"aubervilliers" ,"auch" ,"auchel" ,"audincourt" ,"aulnay-sous-bois" ,"auray" ,"aurillac" ,"auriol" ,"autun" ,"auxerre" ,"avignon" ,"avion" ,"avirons" ,"avon" ,"avrille" ,"bagneux" ,"bagnolet" ,"bagnols-sur-ceze" ,"baie-mahault" ,"bailleul" ,"balma" ,"bandraboua" ,"bar-le-duc" ,"barentin" ,"basse-terre" ,"bastia" ,"bayeux" ,"bayonne" ,"beaucaire" ,"beaumont" ,"beaune" ,"beausoleil" ,"beauvais" ,"begles" ,"belfort" ,"bellegarde-sur-valserine" ,"berck" ,"bergerac" ,"bernay" ,"berre-l'etang" ,"besancon" ,"bethune" ,"betton" ,"beziers" ,"bezons" ,"biarritz" ,"billere" ,"biscarrosse" ,"bischheim" ,"bischwiller" ,"blagnac" ,"blanquefort" ,"blois" ,"bobigny" ,"bois-colombes" ,"bois-d'arcy" ,"bois-guillaume" ,"boissy-saint-leger" ,"bolbec" ,"bollene" ,"bondy" ,"bonneuil-sur-marne" ,"bonneville" ,"bordeaux" ,"bouc-bel-air" ,"bouguenais" ,"boulogne-billancourt" ,"boulogne-sur-mer" ,"bourg-de-peage" ,"bourg-en-bresse" ,"bourg-la-reine" ,"bourg-les-valence" ,"bourges" ,"bourgoin-jallieu" ,"bras-panon" ,"bressuire" ,"brest" ,"bretigny-sur-orge" ,"briancon" ,"brie-comte-robert" ,"brignais" ,"brignoles" ,"brive-la-gaillarde" ,"bron" ,"bruay-la-buissiere" ,"bruay-sur-l'escaut" ,"bruges" ,"brunoy" ,"bruz" ,"bry-sur-marne" ,"bully-les-mines" ,"bussy-saint-georges" ,"cachan" ,"caen" ,"cagnes-sur-mer" ,"cahors" ,"calais" ,"caluire-et-cuire" ,"cambrai" ,"canet-en-roussillon" ,"cannes" ,"canteleu" ,"capesterre-belle-eau" ,"carcassonne" ,"carmaux" ,"carpentras" ,"carquefou" ,"carrieres-sous-poissy" ,"carrieres-sur-seine" ,"carros" ,"carvin" ,"castanet-tolosan" ,"castelnau-le-lez" ,"castelnaudary" ,"castelsarrasin" ,"castres" ,"caudry" ,"cavaillon" ,"cayenne" ,"cenon" ,"cergy" ,"cernay" ,"cesson-sevigne" ,"cestas" ,"chalette-sur-loing" ,"challans" ,"chalon-sur-saone" ,"chalons-en-champagne" ,"chamalieres" ,"chambery" ,"chambray-les-tours" ,"champigny-sur-marne" ,"champs-sur-marne" ,"chantilly" ,"charenton-le-pont" ,"charleville-mezieres" ,"chartres" ,"chateau-d'olonne" ,"chateau-gontier" ,"chateau-thierry" ,"chateaubriant" ,"chateaudun" ,"chateauneuf-les-martigues" ,"chateaurenard" ,"chateauroux" ,"chatellerault" ,"chatenay-malabry" ,"chatillon" ,"chatou" ,"chaumont" ,"chauny" ,"chaville" ,"chelles" ,"chennevieres-sur-marne" ,"chenove" ,"cherbourg-octeville" ,"chevilly-larue" ,"chilly-mazarin" ,"choisy-le-roi" ,"cholet" ,"clamart" ,"claye-souilly" ,"clermont" ,"clermont-ferrand" ,"clichy" ,"clichy-sous-bois" ,"cluses" ,"cognac" ,"cogolin" ,"colmar" ,"colombes" ,"colomiers" ,"combs-la-ville" ,"comines" ,"compiegne" ,"concarneau" ,"conflans-sainte-honorine" ,"corbeil-essonnes" ,"cormeilles-en-parisis" ,"cosne-cours-sur-loire" ,"coudekerque-branche" ,"coueron" ,"coulommiers" ,"courbevoie" ,"courcouronnes" ,"cournon-d'auvergne" ,"courrieres" ,"cran-gevrier" ,"creil" ,"crepy-en-valois" ,"creteil" ,"creutzwald" ,"croissy-sur-seine" ,"croix" ,"cugnaux" ,"cusset" ,"dammarie-les-lys" ,"dax" ,"decines-charpieu" ,"dembeni" ,"denain" ,"deuil-la-barre" ,"deville-les-rouen" ,"dieppe" ,"digne-les-bains" ,"dijon" ,"dinan" ,"dinard" ,"dole" ,"domont" ,"douai" ,"douarnenez" ,"draguignan" ,"drancy" ,"draveil" ,"dreux" ,"ducos" ,"dugny" ,"dunkerque" ,"dzaoudzi" ,"eaubonne" ,"echirolles" ,"ecully" ,"elancourt" ,"elbeuf" ,"enghien-les-bains" ,"epernay" ,"epinal" ,"epinay-sous-senart" ,"epinay-sur-orge" ,"epinay-sur-seine" ,"equeurdreville-hainneville" ,"eragny" ,"ermont" ,"erstein" ,"etampes" ,"etang-sale" ,"etaples" ,"evreux" ,"evry" ,"eysines" ,"faches-thumesnil" ,"fameck" ,"fecamp" ,"firminy" ,"flers" ,"fleury-les-aubrais" ,"floirac" ,"florange" ,"fondettes" ,"fonsorbes" ,"fontaine" ,"fontainebleau" ,"fontenay-aux-roses" ,"fontenay-le-comte" ,"fontenay-le-fleury" ,"fontenay-sous-bois" ,"forbach" ,"fort-de-france" ,"fos-sur-mer" ,"fougeres" ,"fourmies" ,"francheville" ,"francois" ,"franconville" ,"frejus" ,"fresnes" ,"freyming-merlebach" ,"frontignan" ,"gagny" ,"gaillac" ,"gaillard" ,"gap" ,"garches" ,"gardanne" ,"garges-les-gonesse" ,"genas" ,"gennevilliers" ,"gentilly" ,"gerzat" ,"gien" ,"gif-sur-yvette" ,"gisors" ,"givors" ,"gonesse" ,"gosier" ,"goussainville" ,"gradignan" ,"grande-synthe" ,"granville" ,"grasse" ,"graulhet" ,"gravelines" ,"grenoble" ,"grigny" ,"gros-morne" ,"guebwiller" ,"guerande" ,"gueret" ,"guidel" ,"guilherand-granges" ,"guipavas" ,"gujan-mestras" ,"guyancourt" ,"haguenau" ,"halluin" ,"harnes" ,"haubourdin" ,"hautmont" ,"hayange" ,"hazebrouck" ,"hem" ,"hendaye" ,"henin-beaumont" ,"hennebont" ,"herblay" ,"hericourt" ,"herouville-saint-clair" ,"hoenheim" ,"houilles" ,"hyeres" ,"ifs" ,"igny" ,"illkirch-graffenstaden" ,"illzach" ,"issoire" ,"issoudun" ,"issy-les-moulineaux" ,"istres" ,"ivry-sur-seine" ,"joigny" ,"joinville-le-pont" ,"joue-les-tours" ,"jouy-le-moutier" ,"juvisy-sur-orge" ,"kingersheim" ,"koungou" ,"kourou" ,"l'hay-les-roses" ,"l'isle-adam" ,"l'isle-d'abeau" ,"l'isle-sur-la-sorgue" ,"l'union" ,"la baule-escoublac" ,"la celle-saint-cloud" ,"la chapelle-saint-luc" ,"la chapelle-sur-erdre" ,"la ciotat" ,"la courneuve" ,"la crau" ,"la fleche" ,"la garde" ,"la garenne-colombes" ,"la madeleine" ,"la motte-servolex" ,"la queue-en-brie" ,"la riche" ,"la roche-sur-foron" ,"la roche-sur-yon" ,"la rochelle" ,"la seyne-sur-mer" ,"la teste-de-buch" ,"la trinite" ,"la valette-du-var" ,"lagny-sur-marne" ,"lamballe" ,"lambersart" ,"lamentin" ,"landerneau" ,"lanester" ,"lannion" ,"laon" ,"lattes" ,"laval" ,"lavaur" ,"laxou" ,"le blanc-mesnil" ,"le bourget" ,"le bouscat" ,"le cannet" ,"le chambon-feugerolles" ,"le chesnay" ,"le creusot" ,"le grand-quevilly" ,"le havre" ,"le kremlin-bicetre" ,"le mans" ,"le mee-sur-seine" ,"le pecq" ,"le perreux-sur-marne" ,"le petit-quevilly" ,"le plessis-robinson" ,"le plessis-trevise" ,"le pont-de-claix" ,"le pontet" ,"le portel" ,"le pradet" ,"le pre-saint-gervais" ,"le puy-en-velay" ,"le raincy" ,"le relecq-kerhuon" ,"le vesinet" ,"lens" ,"les clayes-sous-bois" ,"les herbiers" ,"les lilas" ,"les mureaux" ,"les pavillons-sous-bois" ,"les pennes-mirabeau" ,"les ponts-de-ce" ,"les sables-d'olonne" ,"les ulis" ,"levallois-perret" ,"libourne" ,"lieusaint" ,"lievin" ,"lille" ,"limay" ,"limeil-brevannes" ,"limoges" ,"lingolsheim" ,"lisieux" ,"livry-gargan" ,"lognes" ,"longjumeau" ,"longuenesse" ,"longwy" ,"lons" ,"lons-le-saunier" ,"loos" ,"lorient" ,"lormont" ,"lourdes" ,"louviers" ,"luce" ,"lunel" ,"luneville" ,"lyon" ,"lys-lez-lannoy" ,"macon" ,"mainvilliers" ,"maisons-alfort" ,"maisons-laffitte" ,"maizieres-les-metz" ,"malakoff" ,"mamoudzou" ,"mandelieu-la-napoule" ,"manosque" ,"mantes-la-jolie" ,"mantes-la-ville" ,"marcq-en-baroeul" ,"marignane" ,"marly" ,"marly-le-roi" ,"marmande" ,"maromme" ,"marseille" ,"martigues" ,"massy" ,"matoury" ,"maubeuge" ,"mauguio" ,"maurepas" ,"mayenne" ,"meaux" ,"melun" ,"mende" ,"mennecy" ,"menton" ,"mericourt" ,"merignac" ,"meru" ,"metz" ,"meudon" ,"meylan" ,"meyzieu" ,"meze" ,"millau" ,"mions" ,"miramas" ,"mitry-mory" ,"moissac" ,"moissy-cramayel" ,"mons-en-baroeul" ,"mont-de-marsan" ,"mont-saint-aignan" ,"montargis" ,"montataire" ,"montauban" ,"montbeliard" ,"montbrison" ,"montceau-les-mines" ,"montelimar" ,"montereau-fault-yonne" ,"montesson" ,"monteux" ,"montfermeil" ,"montgeron" ,"montigny-en-gohelle" ,"montigny-le-bretonneux" ,"montigny-les-cormeilles" ,"montigny-les-metz" ,"montivilliers" ,"montlouis-sur-loire" ,"montlucon" ,"montmagny" ,"montmorency" ,"montpellier" ,"montreuil" ,"montrouge" ,"morangis" ,"morlaix" ,"morne-a-l'eau" ,"morsang-sur-orge" ,"mouans-sartoux" ,"mougins" ,"moule" ,"moulins" ,"mouvaux" ,"mulhouse" ,"muret" ,"nancy" ,"nanterre" ,"nantes" ,"narbonne" ,"nemours" ,"neuilly-plaisance" ,"neuilly-sur-marne" ,"neuilly-sur-seine" ,"nevers" ,"nice" ,"nimes" ,"niort" ,"noeux-les-mines" ,"nogent-le-rotrou" ,"nogent-sur-marne" ,"nogent-sur-oise" ,"noisiel" ,"noisy-le-grand" ,"noisy-le-sec" ,"noyon" ,"obernai" ,"oignies" ,"oissel" ,"olivet" ,"ollioules" ,"olonne-sur-mer" ,"oloron-sainte-marie" ,"onet-le-chateau" ,"orange" ,"orleans" ,"orly" ,"orsay" ,"orthez" ,"orvault" ,"osny" ,"ostwald" ,"oullins" ,"outreau" ,"oyonnax" ,"ozoir-la-ferriere" ,"palaiseau" ,"pamiers" ,"panazol" ,"pantin" ,"paris" ,"parthenay" ,"passy" ,"pau" ,"perigueux" ,"pernes-les-fontaines" ,"perpignan" ,"persan" ,"pertuis" ,"pessac" ,"petit-bourg" ,"petite-ile" ,"pierrefitte-sur-seine" ,"pierrelatte" ,"plaisance-du-touch" ,"plaisir" ,"plan-de-cuques" ,"plerin" ,"ploemeur" ,"ploufragan" ,"plougastel-daoulas" ,"plouzane" ,"pointe-a-pitre" ,"poissy" ,"poitiers" ,"pont-a-mousson" ,"pont-du-chateau" ,"pont-sainte-maxence" ,"pontarlier" ,"pontault-combault" ,"pontivy" ,"pontoise" ,"pornic" ,"pornichet" ,"port" ,"port-de-bouc" ,"porto-vecchio" ,"possession" ,"provins" ,"puteaux" ,"quimper" ,"quimperle" ,"raismes" ,"rambouillet" ,"ramonville-saint-agne" ,"reims" ,"remire-montjoly" ,"rennes" ,"reze" ,"riedisheim" ,"rillieux-la-pape" ,"riom" ,"riorges" ,"ris-orangis" ,"rive-de-gier" ,"riviere-pilote" ,"riviere-salee" ,"rixheim" ,"roanne" ,"robert" ,"roche-la-moliere" ,"rochefort" ,"rodez" ,"rognac" ,"roissy-en-brie" ,"romainville" ,"romans-sur-isere" ,"rombas" ,"romilly-sur-seine" ,"romorantin-lanthenay" ,"ronchin" ,"roncq" ,"roquebrune-cap-martin" ,"roquebrune-sur-argens" ,"rosny-sous-bois" ,"roubaix" ,"rouen" ,"royan" ,"rueil-malmaison" ,"rumilly" ,"sable-sur-sarthe" ,"sada" ,"saint martin" ,"saint-amand-les-eaux" ,"saint-amand-montrond" ,"saint-andre" ,"saint-andre-les-vergers" ,"saint-andre-lez-lille" ,"saint-ave" ,"saint-avertin" ,"saint-avold" ,"saint-benoit" ,"saint-brevin-les-pins" ,"saint-brice-sous-foret" ,"saint-brieuc" ,"saint-chamond" ,"saint-claude" ,"saint-cloud" ,"saint-cyprien" ,"saint-cyr-l'ecole" ,"saint-cyr-sur-loire" ,"saint-cyr-sur-mer" ,"saint-denis" ,"saint-die-des-vosges" ,"saint-dizier" ,"saint-egreve" ,"saint-esteve" ,"saint-etienne" ,"saint-etienne-du-rouvray" ,"saint-fargeau-ponthierry" ,"saint-fons" ,"saint-francois" ,"saint-gaudens" ,"saint-genis-laval" ,"saint-germain-en-laye" ,"saint-gilles" ,"saint-gratien" ,"saint-herblain" ,"saint-hilaire-de-riez" ,"saint-jacques-de-la-lande" ,"saint-jean-de-braye" ,"saint-jean-de-la-ruelle" ,"saint-jean-de-luz" ,"saint-joseph" ,"saint-julien-en-genevois" ,"saint-junien" ,"saint-just-saint-rambert" ,"saint-laurent-du-maroni" ,"saint-laurent-du-var" ,"saint-leu" ,"saint-leu-la-foret" ,"saint-lo" ,"saint-louis" ,"saint-malo" ,"saint-mande" ,"saint-martin-boulogne" ,"saint-martin-d'heres" ,"saint-martin-de-crau" ,"saint-maur-des-fosses" ,"saint-maurice" ,"saint-maximin-la-sainte-baume" ,"saint-medard-en-jalles" ,"saint-michel-sur-orge" ,"saint-nazaire" ,"saint-omer" ,"saint-orens-de-gameville" ,"saint-ouen" ,"saint-ouen-l'aumone" ,"saint-paul" ,"saint-paul-les-dax" ,"saint-pierre" ,"saint-pierre-des-corps" ,"saint-priest" ,"saint-quentin" ,"saint-raphael" ,"saint-remy-de-provence" ,"saint-saulve" ,"saint-sebastien-sur-loire" ,"sainte-anne" ,"sainte-foy-les-lyon" ,"sainte-genevieve-des-bois" ,"sainte-luce-sur-loire" ,"sainte-marie" ,"sainte-maxime" ,"sainte-rose" ,"sainte-savine" ,"sainte-suzanne" ,"saintes" ,"sallanches" ,"sallaumines" ,"salon-de-provence" ,"sanary-sur-mer" ,"sannois" ,"saran" ,"sarcelles" ,"sarrebourg" ,"sarreguemines" ,"sartrouville" ,"sassenage" ,"saumur" ,"saverne" ,"savigny-le-temple" ,"savigny-sur-orge" ,"sceaux" ,"schiltigheim" ,"seclin" ,"sedan" ,"selestat" ,"senlis" ,"sens" ,"septemes-les-vallons" ,"sete" ,"sevran" ,"sevres" ,"seynod" ,"seyssinet-pariset" ,"shoelcher" ,"sin-le-noble" ,"six-fours-les-plages" ,"soissons" ,"soisy-sous-montmorency" ,"sollies-pont" ,"somain" ,"sorgues" ,"sotteville-les-rouen" ,"soyaux" ,"stains" ,"stiring-wendel" ,"strasbourg" ,"sucy-en-brie" ,"suresnes" ,"talant" ,"talence" ,"tampon" ,"tarare" ,"tarascon" ,"tarbes" ,"tarnos" ,"tassin-la-demi-lune" ,"taverny" ,"tergnier" ,"thiais" ,"thiers" ,"thionville" ,"thonon-les-bains" ,"tinqueux" ,"torcy" ,"toul" ,"toulon" ,"toulouse" ,"tourcoing" ,"tourlaville" ,"tournefeuille" ,"tournon-sur-rhone" ,"tours" ,"trappes" ,"trelaze" ,"tremblay-en-france" ,"trets" ,"triel-sur-seine" ,"trinite" ,"troyes" ,"tsingoni" ,"tulle" ,"ussel" ,"vaires-sur-marne" ,"val-de-reuil" ,"valbonne" ,"valence" ,"valenciennes" ,"valentigney" ,"valenton" ,"vallauris" ,"vandoeuvre-les-nancy" ,"vannes" ,"vanves" ,"vaulx-en-velin" ,"vaureal" ,"vauvert" ,"vaux-le-penil" ,"velizy-villacoublay" ,"vence" ,"vendome" ,"venissieux" ,"verdun" ,"verneuil-sur-seine" ,"vernon" ,"vernouillet" ,"verrieres-le-buisson" ,"versailles" ,"vertou" ,"vesoul" ,"vichy" ,"vienne" ,"vierzon" ,"vieux-conde" ,"vigneux-sur-seine" ,"ville-d'avray" ,"villefontaine" ,"villefranche-de-rouergue" ,"villefranche-sur-saone" ,"villejuif" ,"villemomble" ,"villenave-d'ornon" ,"villeneuve-d'ascq" ,"villeneuve-la-garenne" ,"villeneuve-le-roi" ,"villeneuve-les-avignon" ,"villeneuve-loubet" ,"villeneuve-saint-georges" ,"villeneuve-sur-lot" ,"villeparisis" ,"villepinte" ,"villers-cotterets" ,"villers-les-nancy" ,"villetaneuse" ,"villeurbanne" ,"villiers-le-bel" ,"villiers-sur-marne" ,"vincennes" ,"vire" ,"viroflay" ,"viry-chatillon" ,"vitre" ,"vitrolles" ,"vitry-le-francois" ,"vitry-sur-seine" ,"voiron" ,"voisins-le-bretonneux" ,"wasquehal" ,"wattignies" ,"wattrelos" ,"wittelsheim" ,"wittenheim" ,"woippy" ,"yerres" ,"yutz" ,"yvetot" ,"yzeure",
        "Abbeville" ,"Abymes" ,"Acheres" ,"Agde" ,"Agen" ,"Aix-en-provence" ,"Aix-les-bains" ,"Ajaccio" ,"Albertville" ,"Albi" ,"Alencon" ,"Ales" ,"Alfortville" ,"Allauch" ,"Allonnes" ,"Ambares-et-lagrave" ,"Amberieu-en-bugey" ,"Amboise" ,"Amiens" ,"Amilly" ,"Amneville" ,"Andernos-les-bains" ,"Andresy" ,"Angers" ,"Anglet" ,"Angouleme" ,"Aniche" ,"Annecy" ,"Annecy-le-vieux" ,"Annemasse" ,"Annonay" ,"Antibes" ,"Antony" ,"Anzin" ,"Apt" ,"Arcachon" ,"Arcueil" ,"Argentan" ,"Argenteuil" ,"Arles" ,"Armentieres" ,"Arnouville" ,"Arpajon" ,"Arras" ,"Asnieres-sur-seine" ,"Athis-mons" ,"Aubagne" ,"Aubenas" ,"Aubergenville" ,"Aubervilliers" ,"Auch" ,"Auchel" ,"Audincourt" ,"Aulnay-sous-bois" ,"Auray" ,"Aurillac" ,"Auriol" ,"Autun" ,"Auxerre" ,"Avignon" ,"Avion" ,"Avirons" ,"Avon" ,"Avrille" ,"Bagneux" ,"Bagnolet" ,"Bagnols-sur-ceze" ,"Baie-mahault" ,"Bailleul" ,"Balma" ,"Bandraboua" ,"Bar-le-duc" ,"Barentin" ,"Basse-terre" ,"Bastia" ,"Bayeux" ,"Bayonne" ,"Beaucaire" ,"Beaumont" ,"Beaune" ,"Beausoleil" ,"Beauvais" ,"Begles" ,"Belfort" ,"Bellegarde-sur-valserine" ,"Berck" ,"Bergerac" ,"Bernay" ,"Berre-l'etang" ,"Besancon" ,"Bethune" ,"Betton" ,"Beziers" ,"Bezons" ,"Biarritz" ,"Billere" ,"Biscarrosse" ,"Bischheim" ,"Bischwiller" ,"Blagnac" ,"Blanquefort" ,"Blois" ,"Bobigny" ,"Bois-colombes" ,"Bois-d'arcy" ,"Bois-guillaume" ,"Boissy-saint-leger" ,"Bolbec" ,"Bollene" ,"Bondy" ,"Bonneuil-sur-marne" ,"Bonneville" ,"Bordeaux" ,"Bouc-bel-air" ,"Bouguenais" ,"Boulogne-billancourt" ,"Boulogne-sur-mer" ,"Bourg-de-peage" ,"Bourg-en-bresse" ,"Bourg-la-reine" ,"Bourg-les-valence" ,"Bourges" ,"Bourgoin-jallieu" ,"Bras-panon" ,"Bressuire" ,"Brest" ,"Bretigny-sur-orge" ,"Briancon" ,"Brie-comte-robert" ,"Brignais" ,"Brignoles" ,"Brive-la-gaillarde" ,"Bron" ,"Bruay-la-buissiere" ,"Bruay-sur-l'escaut" ,"Bruges" ,"Brunoy" ,"Bruz" ,"Bry-sur-marne" ,"Bully-les-mines" ,"Bussy-saint-georges" ,"Cachan" ,"Caen" ,"Cagnes-sur-mer" ,"Cahors" ,"Calais" ,"Caluire-et-cuire" ,"Cambrai" ,"Canet-en-roussillon" ,"Cannes" ,"Canteleu" ,"Capesterre-belle-eau" ,"Carcassonne" ,"Carmaux" ,"Carpentras" ,"Carquefou" ,"Carrieres-sous-poissy" ,"Carrieres-sur-seine" ,"Carros" ,"Carvin" ,"Castanet-tolosan" ,"Castelnau-le-lez" ,"Castelnaudary" ,"Castelsarrasin" ,"Castres" ,"Caudry" ,"Cavaillon" ,"Cayenne" ,"Cenon" ,"Cergy" ,"Cernay" ,"Cesson-sevigne" ,"Cestas" ,"Chalette-sur-loing" ,"Challans" ,"Chalon-sur-saone" ,"Chalons-en-champagne" ,"Chamalieres" ,"Chambery" ,"Chambray-les-tours" ,"Champigny-sur-marne" ,"Champs-sur-marne" ,"Chantilly" ,"Charenton-le-pont" ,"Charleville-mezieres" ,"Chartres" ,"Chateau-d'olonne" ,"Chateau-gontier" ,"Chateau-thierry" ,"Chateaubriant" ,"Chateaudun" ,"Chateauneuf-les-martigues" ,"Chateaurenard" ,"Chateauroux" ,"Chatellerault" ,"Chatenay-malabry" ,"Chatillon" ,"Chatou" ,"Chaumont" ,"Chauny" ,"Chaville" ,"Chelles" ,"Chennevieres-sur-marne" ,"Chenove" ,"Cherbourg-octeville" ,"Chevilly-larue" ,"Chilly-mazarin" ,"Choisy-le-roi" ,"Cholet" ,"Clamart" ,"Claye-souilly" ,"Clermont" ,"Clermont-ferrand" ,"Clichy" ,"Clichy-sous-bois" ,"Cluses" ,"Cognac" ,"Cogolin" ,"Colmar" ,"Colombes" ,"Colomiers" ,"Combs-la-ville" ,"Comines" ,"Compiegne" ,"Concarneau" ,"Conflans-sainte-honorine" ,"Corbeil-essonnes" ,"Cormeilles-en-parisis" ,"Cosne-cours-sur-loire" ,"Coudekerque-branche" ,"Coueron" ,"Coulommiers" ,"Courbevoie" ,"Courcouronnes" ,"Cournon-d'auvergne" ,"Courrieres" ,"Cran-gevrier" ,"Creil" ,"Crepy-en-valois" ,"Creteil" ,"Creutzwald" ,"Croissy-sur-seine" ,"Croix" ,"Cugnaux" ,"Cusset" ,"Dammarie-les-lys" ,"Dax" ,"Decines-charpieu" ,"Dembeni" ,"Denain" ,"Deuil-la-barre" ,"Deville-les-rouen" ,"Dieppe" ,"Digne-les-bains" ,"Dijon" ,"Dinan" ,"Dinard" ,"Dole" ,"Domont" ,"Douai" ,"Douarnenez" ,"Draguignan" ,"Drancy" ,"Draveil" ,"Dreux" ,"Ducos" ,"Dugny" ,"Dunkerque" ,"Dzaoudzi" ,"Eaubonne" ,"Echirolles" ,"Ecully" ,"Elancourt" ,"Elbeuf" ,"Enghien-les-bains" ,"Epernay" ,"Epinal" ,"Epinay-sous-senart" ,"Epinay-sur-orge" ,"Epinay-sur-seine" ,"Equeurdreville-hainneville" ,"Eragny" ,"Ermont" ,"Erstein" ,"Etampes" ,"Etang-sale" ,"Etaples" ,"Evreux" ,"Evry" ,"Eysines" ,"Faches-thumesnil" ,"Fameck" ,"Fecamp" ,"Firminy" ,"Flers" ,"Fleury-les-aubrais" ,"Floirac" ,"Florange" ,"Fondettes" ,"Fonsorbes" ,"Fontaine" ,"Fontainebleau" ,"Fontenay-aux-roses" ,"Fontenay-le-comte" ,"Fontenay-le-fleury" ,"Fontenay-sous-bois" ,"Forbach" ,"Fort-de-france" ,"Fos-sur-mer" ,"Fougeres" ,"Fourmies" ,"Francheville" ,"Francois" ,"Franconville" ,"Frejus" ,"Fresnes" ,"Freyming-merlebach" ,"Frontignan" ,"Gagny" ,"Gaillac" ,"Gaillard" ,"Gap" ,"Garches" ,"Gardanne" ,"Garges-les-gonesse" ,"Genas" ,"Gennevilliers" ,"Gentilly" ,"Gerzat" ,"Gien" ,"Gif-sur-yvette" ,"Gisors" ,"Givors" ,"Gonesse" ,"Gosier" ,"Goussainville" ,"Gradignan" ,"Grande-synthe" ,"Granville" ,"Grasse" ,"Graulhet" ,"Gravelines" ,"Grenoble" ,"Grigny" ,"Gros-morne" ,"Guebwiller" ,"Guerande" ,"Gueret" ,"Guidel" ,"Guilherand-granges" ,"Guipavas" ,"Gujan-mestras" ,"Guyancourt" ,"Haguenau" ,"Halluin" ,"Harnes" ,"Haubourdin" ,"Hautmont" ,"Hayange" ,"Hazebrouck" ,"Hem" ,"Hendaye" ,"Henin-beaumont" ,"Hennebont" ,"Herblay" ,"Hericourt" ,"Herouville-saint-clair" ,"Hoenheim" ,"Houilles" ,"Hyeres" ,"Ifs" ,"Igny" ,"Illkirch-graffenstaden" ,"Illzach" ,"Issoire" ,"Issoudun" ,"Issy-les-moulineaux" ,"Istres" ,"Ivry-sur-seine" ,"Joigny" ,"Joinville-le-pont" ,"Joue-les-tours" ,"Jouy-le-moutier" ,"Juvisy-sur-orge" ,"Kingersheim" ,"Koungou" ,"Kourou" ,"L'hay-les-roses" ,"L'isle-adam" ,"L'isle-d'abeau" ,"L'isle-sur-la-sorgue" ,"L'union" ,"La baule-escoublac" ,"La celle-saint-cloud" ,"La chapelle-saint-luc" ,"La chapelle-sur-erdre" ,"La ciotat" ,"La courneuve" ,"La crau" ,"La fleche" ,"La garde" ,"La garenne-colombes" ,"La madeleine" ,"La motte-servolex" ,"La queue-en-brie" ,"La riche" ,"La roche-sur-foron" ,"La roche-sur-yon" ,"La rochelle" ,"La seyne-sur-mer" ,"La teste-de-buch" ,"La trinite" ,"La valette-du-var" ,"Lagny-sur-marne" ,"Lamballe" ,"Lambersart" ,"Lamentin" ,"Landerneau" ,"Lanester" ,"Lannion" ,"Laon" ,"Lattes" ,"Laval" ,"Lavaur" ,"Laxou" ,"Le blanc-mesnil" ,"Le bourget" ,"Le bouscat" ,"Le cannet" ,"Le chambon-feugerolles" ,"Le chesnay" ,"Le creusot" ,"Le grand-quevilly" ,"Le havre" ,"Le kremlin-bicetre" ,"Le mans" ,"Le mee-sur-seine" ,"Le pecq" ,"Le perreux-sur-marne" ,"Le petit-quevilly" ,"Le plessis-robinson" ,"Le plessis-trevise" ,"Le pont-de-claix" ,"Le pontet" ,"Le portel" ,"Le pradet" ,"Le pre-saint-gervais" ,"Le puy-en-velay" ,"Le raincy" ,"Le relecq-kerhuon" ,"Le vesinet" ,"Lens" ,"Les clayes-sous-bois" ,"Les herbiers" ,"Les lilas" ,"Les mureaux" ,"Les pavillons-sous-bois" ,"Les pennes-mirabeau" ,"Les ponts-de-ce" ,"Les sables-d'olonne" ,"Les ulis" ,"Levallois-perret" ,"Libourne" ,"Lieusaint" ,"Lievin" ,"Lille" ,"Limay" ,"Limeil-brevannes" ,"Limoges" ,"Lingolsheim" ,"Lisieux" ,"Livry-gargan" ,"Lognes" ,"Longjumeau" ,"Longuenesse" ,"Longwy" ,"Lons" ,"Lons-le-saunier" ,"Loos" ,"Lorient" ,"Lormont" ,"Lourdes" ,"Louviers" ,"Luce" ,"Lunel" ,"Luneville" ,"Lyon" ,"Lys-lez-lannoy" ,"Macon" ,"Mainvilliers" ,"Maisons-alfort" ,"Maisons-laffitte" ,"Maizieres-les-metz" ,"Malakoff" ,"Mamoudzou" ,"Mandelieu-la-napoule" ,"Manosque" ,"Mantes-la-jolie" ,"Mantes-la-ville" ,"Marcq-en-baroeul" ,"Marignane" ,"Marly" ,"Marly-le-roi" ,"Marmande" ,"Maromme" ,"Marseille" ,"Martigues" ,"Massy" ,"Matoury" ,"Maubeuge" ,"Mauguio" ,"Maurepas" ,"Mayenne" ,"Meaux" ,"Melun" ,"Mende" ,"Mennecy" ,"Menton" ,"Mericourt" ,"Merignac" ,"Meru" ,"Metz" ,"Meudon" ,"Meylan" ,"Meyzieu" ,"Meze" ,"Millau" ,"Mions" ,"Miramas" ,"Mitry-mory" ,"Moissac" ,"Moissy-cramayel" ,"Mons-en-baroeul" ,"Mont-de-marsan" ,"Mont-saint-aignan" ,"Montargis" ,"Montataire" ,"Montauban" ,"Montbeliard" ,"Montbrison" ,"Montceau-les-mines" ,"Montelimar" ,"Montereau-fault-yonne" ,"Montesson" ,"Monteux" ,"Montfermeil" ,"Montgeron" ,"Montigny-en-gohelle" ,"Montigny-le-bretonneux" ,"Montigny-les-cormeilles" ,"Montigny-les-metz" ,"Montivilliers" ,"Montlouis-sur-loire" ,"Montlucon" ,"Montmagny" ,"Montmorency" ,"Montpellier" ,"Montreuil" ,"Montrouge" ,"Morangis" ,"Morlaix" ,"Morne-a-l'eau" ,"Morsang-sur-orge" ,"Mouans-sartoux" ,"Mougins" ,"Moule" ,"Moulins" ,"Mouvaux" ,"Mulhouse" ,"Muret" ,"Nancy" ,"Nanterre" ,"Nantes" ,"Narbonne" ,"Nemours" ,"Neuilly-plaisance" ,"Neuilly-sur-marne" ,"Neuilly-sur-seine" ,"Nevers" ,"Nice" ,"Nimes" ,"Niort" ,"Noeux-les-mines" ,"Nogent-le-rotrou" ,"Nogent-sur-marne" ,"Nogent-sur-oise" ,"Noisiel" ,"Noisy-le-grand" ,"Noisy-le-sec" ,"Noyon" ,"Obernai" ,"Oignies" ,"Oissel" ,"Olivet" ,"Ollioules" ,"Olonne-sur-mer" ,"Oloron-sainte-marie" ,"Onet-le-chateau" ,"Orange" ,"Orleans" ,"Orly" ,"Orsay" ,"Orthez" ,"Orvault" ,"Osny" ,"Ostwald" ,"Oullins" ,"Outreau" ,"Oyonnax" ,"Ozoir-la-ferriere" ,"Palaiseau" ,"Pamiers" ,"Panazol" ,"Pantin" ,"Paris" ,"Parthenay" ,"Passy" ,"Pau" ,"Perigueux" ,"Pernes-les-fontaines" ,"Perpignan" ,"Persan" ,"Pertuis" ,"Pessac" ,"Petit-bourg" ,"Petite-ile" ,"Pierrefitte-sur-seine" ,"Pierrelatte" ,"Plaisance-du-touch" ,"Plaisir" ,"Plan-de-cuques" ,"Plerin" ,"Ploemeur" ,"Ploufragan" ,"Plougastel-daoulas" ,"Plouzane" ,"Pointe-a-pitre" ,"Poissy" ,"Poitiers" ,"Pont-a-mousson" ,"Pont-du-chateau" ,"Pont-sainte-maxence" ,"Pontarlier" ,"Pontault-combault" ,"Pontivy" ,"Pontoise" ,"Pornic" ,"Pornichet" ,"Port" ,"Port-de-bouc" ,"Porto-vecchio" ,"Possession" ,"Provins" ,"Puteaux" ,"Quimper" ,"Quimperle" ,"Raismes" ,"Rambouillet" ,"Ramonville-saint-agne" ,"Reims" ,"Remire-montjoly" ,"Rennes" ,"Reze" ,"Riedisheim" ,"Rillieux-la-pape" ,"Riom" ,"Riorges" ,"Ris-orangis" ,"Rive-de-gier" ,"Riviere-pilote" ,"Riviere-salee" ,"Rixheim" ,"Roanne" ,"Robert" ,"Roche-la-moliere" ,"Rochefort" ,"Rodez" ,"Rognac" ,"Roissy-en-brie" ,"Romainville" ,"Romans-sur-isere" ,"Rombas" ,"Romilly-sur-seine" ,"Romorantin-lanthenay" ,"Ronchin" ,"Roncq" ,"Roquebrune-cap-martin" ,"Roquebrune-sur-argens" ,"Rosny-sous-bois" ,"Roubaix" ,"Rouen" ,"Royan" ,"Rueil-malmaison" ,"Rumilly" ,"Sable-sur-sarthe" ,"Sada" ,"Saint martin" ,"Saint-amand-les-eaux" ,"Saint-amand-montrond" ,"Saint-andre" ,"Saint-andre-les-vergers" ,"Saint-andre-lez-lille" ,"Saint-ave" ,"Saint-avertin" ,"Saint-avold" ,"Saint-benoit" ,"Saint-brevin-les-pins" ,"Saint-brice-sous-foret" ,"Saint-brieuc" ,"Saint-chamond" ,"Saint-claude" ,"Saint-cloud" ,"Saint-cyprien" ,"Saint-cyr-l'ecole" ,"Saint-cyr-sur-loire" ,"Saint-cyr-sur-mer" ,"Saint-denis" ,"Saint-die-des-vosges" ,"Saint-dizier" ,"Saint-egreve" ,"Saint-esteve" ,"Saint-etienne" ,"Saint-etienne-du-rouvray" ,"Saint-fargeau-ponthierry" ,"Saint-fons" ,"Saint-francois" ,"Saint-gaudens" ,"Saint-genis-laval" ,"Saint-germain-en-laye" ,"Saint-gilles" ,"Saint-gratien" ,"Saint-herblain" ,"Saint-hilaire-de-riez" ,"Saint-jacques-de-la-lande" ,"Saint-jean-de-braye" ,"Saint-jean-de-la-ruelle" ,"Saint-jean-de-luz" ,"Saint-joseph" ,"Saint-julien-en-genevois" ,"Saint-junien" ,"Saint-just-saint-rambert" ,"Saint-laurent-du-maroni" ,"Saint-laurent-du-var" ,"Saint-leu" ,"Saint-leu-la-foret" ,"Saint-lo" ,"Saint-louis" ,"Saint-malo" ,"Saint-mande" ,"Saint-martin-boulogne" ,"Saint-martin-d'heres" ,"Saint-martin-de-crau" ,"Saint-maur-des-fosses" ,"Saint-maurice" ,"Saint-maximin-la-sainte-baume" ,"Saint-medard-en-jalles" ,"Saint-michel-sur-orge" ,"Saint-nazaire" ,"Saint-omer" ,"Saint-orens-de-gameville" ,"Saint-ouen" ,"Saint-ouen-l'aumone" ,"Saint-paul" ,"Saint-paul-les-dax" ,"Saint-pierre" ,"Saint-pierre-des-corps" ,"Saint-priest" ,"Saint-quentin" ,"Saint-raphael" ,"Saint-remy-de-provence" ,"Saint-saulve" ,"Saint-sebastien-sur-loire" ,"Sainte-anne" ,"Sainte-foy-les-lyon" ,"Sainte-genevieve-des-bois" ,"Sainte-luce-sur-loire" ,"Sainte-marie" ,"Sainte-maxime" ,"Sainte-rose" ,"Sainte-savine" ,"Sainte-suzanne" ,"Saintes" ,"Sallanches" ,"Sallaumines" ,"Salon-de-provence" ,"Sanary-sur-mer" ,"Sannois" ,"Saran" ,"Sarcelles" ,"Sarrebourg" ,"Sarreguemines" ,"Sartrouville" ,"Sassenage" ,"Saumur" ,"Saverne" ,"Savigny-le-temple" ,"Savigny-sur-orge" ,"Sceaux" ,"Schiltigheim" ,"Seclin" ,"Sedan" ,"Selestat" ,"Senlis" ,"Sens" ,"Septemes-les-vallons" ,"Sete" ,"Sevran" ,"Sevres" ,"Seynod" ,"Seyssinet-pariset" ,"Shoelcher" ,"Sin-le-noble" ,"Six-fours-les-plages" ,"Soissons" ,"Soisy-sous-montmorency" ,"Sollies-pont" ,"Somain" ,"Sorgues" ,"Sotteville-les-rouen" ,"Soyaux" ,"Stains" ,"Stiring-wendel" ,"Strasbourg" ,"Sucy-en-brie" ,"Suresnes" ,"Talant" ,"Talence" ,"Tampon" ,"Tarare" ,"Tarascon" ,"Tarbes" ,"Tarnos" ,"Tassin-la-demi-lune" ,"Taverny" ,"Tergnier" ,"Thiais" ,"Thiers" ,"Thionville" ,"Thonon-les-bains" ,"Tinqueux" ,"Torcy" ,"Toul" ,"Toulon" ,"Toulouse" ,"Tourcoing" ,"Tourlaville" ,"Tournefeuille" ,"Tournon-sur-rhone" ,"Tours" ,"Trappes" ,"Trelaze" ,"Tremblay-en-france" ,"Trets" ,"Triel-sur-seine" ,"Trinite" ,"Troyes" ,"Tsingoni" ,"Tulle" ,"Ussel" ,"Vaires-sur-marne" ,"Val-de-reuil" ,"Valbonne" ,"Valence" ,"Valenciennes" ,"Valentigney" ,"Valenton" ,"Vallauris" ,"Vandoeuvre-les-nancy" ,"Vannes" ,"Vanves" ,"Vaulx-en-velin" ,"Vaureal" ,"Vauvert" ,"Vaux-le-penil" ,"Velizy-villacoublay" ,"Vence" ,"Vendome" ,"Venissieux" ,"Verdun" ,"Verneuil-sur-seine" ,"Vernon" ,"Vernouillet" ,"Verrieres-le-buisson" ,"Versailles" ,"Vertou" ,"Vesoul" ,"Vichy" ,"Vienne" ,"Vierzon" ,"Vieux-conde" ,"Vigneux-sur-seine" ,"Ville-d'avray" ,"Villefontaine" ,"Villefranche-de-rouergue" ,"Villefranche-sur-saone" ,"Villejuif" ,"Villemomble" ,"Villenave-d'ornon" ,"Villeneuve-d'ascq" ,"Villeneuve-la-garenne" ,"Villeneuve-le-roi" ,"Villeneuve-les-avignon" ,"Villeneuve-loubet" ,"Villeneuve-saint-georges" ,"Villeneuve-sur-lot" ,"Villeparisis" ,"Villepinte" ,"Villers-cotterets" ,"Villers-les-nancy" ,"Villetaneuse" ,"Villeurbanne" ,"Villiers-le-bel" ,"Villiers-sur-marne" ,"Vincennes" ,"Vire" ,"Viroflay" ,"Viry-chatillon" ,"Vitre" ,"Vitrolles" ,"Vitry-le-francois" ,"Vitry-sur-seine" ,"Voiron" ,"Voisins-le-bretonneux" ,"Wasquehal" ,"Wattignies" ,"Wattrelos" ,"Wittelsheim" ,"Wittenheim" ,"Woippy" ,"Yerres" ,"Yutz" ,"Yvetot" ,"Yzeure")
    var listener : CityFragmentListener? = null
    private lateinit var cities : MutableList<City>
    private lateinit var  database : Database
    private lateinit var recyclerView: RecyclerView
    private lateinit var adapter: CityAdapter
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        database = App.database
        cities = mutableListOf()
        setHasOptionsMenu(true)
    }
    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View? {
        val view = inflater.inflate(R.layout.fragment_city, container, false)
        recyclerView = view.findViewById(R.id.cities_recycler_view)
        recyclerView.layoutManager = LinearLayoutManager(context)
        return view
    }
    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)
        cities = database.getAllCities()
        adapter = CityAdapter(cities, this)
        recyclerView.adapter = adapter
    }
    override fun onCreateOptionsMenu(menu: Menu, inflater: MenuInflater) {
        inflater.inflate(R.menu.fragment_city, menu)
    }
    override fun onOptionsItemSelected(item: MenuItem): Boolean {
        when(item?.itemId){
            R.id.action_create_city -> {
                showCreateCityDialog()
                return true
            }
        }
        return super.onOptionsItemSelected(item)
    }
    @SuppressLint("UseRequireInsteadOfGet")
    private fun showCreateCityDialog() {
        val createCityFragment = CreateCityDialogFragment()
        createCityFragment.listener = object: CreateCityDialogFragment.CreateCityDialogListener{
            override fun OnDialogPositiveClick(cityName: String) {
                val found = cityName in allcity
                if(found) {
                    saveCity(City(cityName))
                }
                else{
                    context?.toast("Impossible d'ajouter $cityName")
                }
            }
            override fun OnDialogNegativeClick() { }
        }
        createCityFragment.show(fragmentManager!!, "CreateCityDialogFragment")
    }
    @SuppressLint("UseRequireInsteadOfGet")
    private fun showDelteCityDialog(city: City) {
        val deleteCityFragment = DeleteCityDialogFragment.newInstance(city.name)
        deleteCityFragment.listener = object : DeleteCityDialogFragment.DeleteCityDialogListener{
            override fun onDialogPosiiveClick() {
                deleteCity(city)
            }

            override fun onDialogNegativeClick() {
            }

        }
        deleteCityFragment.show(fragmentManager!!, "DeleteCityDialogFragment")
    }
    private fun saveCity(city: City) {
        if(database.createCity(city)){
            cities.add(city)
            adapter.notifyDataSetChanged()
            context?.toast("Ville '${city.name}' créée")
        }else{
            context?.toast("Impossible de créér la ville '${city.name}'")
        }
    }
    private fun deleteCity(city: City) {
        if(database.deleteCity(city)){
            cities.remove(city)
            adapter.notifyDataSetChanged()
            context?.toast("Ville '${city.name}' supprimée")
        }else{
            context?.toast("Impossible de supprimer la ville '${city.name}'")
        }
    }
    override fun onCitySelected(city: City) {
        listener?.onCitySelected(city)
    }
    override fun onCityDeleted(city: City) {
        showDelteCityDialog(city)
    }
}